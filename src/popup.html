<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Solana Wallet</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <!-- Loading Screen -->
  <div id="loadingScreen" class="screen active">
    <div class="loading-container">
      <div class="wallet-icon">
        <div>
          <img src="/icons/logo.png" style="width: 100px; height: 100px;">
        </div>
      </div>
      <h1>Neel Wallet</h1>
      <div class="loading-spinner"></div>
      <p class="loading-text">Loading wallet...</p>
    </div>
  </div>

  <!-- Welcome Screen -->
  <div id="welcomeScreen" class="screen">
    <div class="wallet-icon">
      <div>
        <img src="/icons/logo.png" style="width: 100px; height: 100px;">
      </div>
    </div>
    <h1>Neel Wallet</h1>
    <p class="subtitle">Secure, fast, and elegant</p>
    <div class="button-group">
      <button class="btn btn-primary" id="createWalletBtn">Create New Wallet</button>
      <button class="btn btn-secondary" id="importWalletBtn">Import Existing Wallet</button>
    </div>
    <p class="terms">By proceeding, you agree to the Terms of Service</p>
  </div>

  <!-- Unlock Wallet Screen -->
  <div id="unlockScreen" class="screen">
    <div class="wallet-icon">
      <div>
        <img src="/icons/logo.png" style="width: 80px; height: 80px;">
      </div>
    </div>
    <h2>Welcome Back</h2>
    <p class="subtitle">Unlock your wallet to continue</p>
    <form id="unlockForm">
      <div class="input-group">
        <label>Password</label>
        <input type="password" id="unlockPassword" placeholder="Enter password" required autofocus>
      </div>
      <button type="submit" class="btn btn-primary">Unlock Wallet</button>
    </form>
  </div>

  <!-- Import Wallet Screen -->
  <div id="importWalletScreen" class="screen">
    <h2>Import Wallet</h2>
    <p class="subtitle">Import using recovery phrase or private key</p>
    
    <!-- Import Method Tabs -->
    <div class="import-tabs">
      <button type="button" class="import-tab active" id="phraseTab">Recovery Phrase</button>
      <button type="button" class="import-tab" id="privateKeyTab">Private Key</button>
    </div>
    
    <form id="importWalletForm">
      <!-- Seed Phrase Import (default) -->
      <div id="phraseImportSection" class="import-section active">
        <div class="input-group">
          <label>Recovery Phrase (12 or 24 words)</label>
          <textarea id="importSeedPhrase" placeholder="Enter your recovery phrase separated by spaces" rows="4"></textarea>
          <div style="font-size: 11px; color: var(--text-tertiary); margin-top: 6px;">
            Make sure each word is spelled correctly and separated by spaces
          </div>
        </div>
      </div>
      
      <!-- Private Key Import -->
      <div id="privateKeyImportSection" class="import-section">
        <div class="input-group">
          <label>Private Key (Base58)</label>
          <textarea id="importPrivateKey" placeholder="Enter your private key in base58 format" rows="3"></textarea>
          <div style="font-size: 11px; color: var(--text-tertiary); margin-top: 6px;">
            Your private key should be 87-88 characters long
          </div>
        </div>
      </div>
      
      <!-- Password (common for both) -->
      <div class="input-group">
        <label>New Password</label>
        <input type="password" id="importPassword" placeholder="Create a password (min 8 characters)" required>
      </div>
      <div class="input-group">
        <label>Confirm Password</label>
        <input type="password" id="importConfirmPassword" placeholder="Confirm password" required>
      </div>
      
      <div class="button-group">
        <button type="button" class="btn btn-secondary" id="backFromImport">Back</button>
        <button type="submit" class="btn btn-primary" id="importSubmitBtn">Import Wallet</button>
      </div>
    </form>
  </div>

  <!-- Create Password Screen -->
  <div id="createPasswordScreen" class="screen">
    <h2>Create Password</h2>
    <p class="subtitle">This password will unlock your wallet</p>
    <form id="createPasswordForm">
      <div class="input-group">
        <label>Password</label>
        <input type="password" id="password" placeholder="Enter password" required>
      </div>
      <div class="input-group">
        <label>Confirm Password</label>
        <input type="password" id="confirmPassword" placeholder="Confirm password" required>
      </div>
      <div class="button-group">
        <button type="button" class="btn btn-secondary" id="backToWelcome">Back</button>
        <button type="submit" class="btn btn-primary">Continue</button>
      </div>
    </form>
  </div>

  <!-- Seed Phrase Backup Screen -->
  <div id="seedBackupScreen" class="screen">
    <h2>Secret Recovery Phrase</h2>
    <p class="subtitle">Write down these 12 words in order. Never share them.</p>
    <div class="warning-box">
      Store this phrase safely. It's the only way to recover your wallet.
    </div>
    <div class="seed-container">
      <div id="seedGrid" class="seed-grid"></div>
      <button id="revealSeedBtn" class="btn-reveal">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
          <circle cx="12" cy="12" r="3"></circle>
        </svg>
        Reveal Phrase
      </button>
    </div>
    <button id="copySeedBtn" class="btn btn-secondary" style="display:none;">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
        <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
      </svg>
      Copy to Clipboard
    </button>
    <button id="confirmSeedBtn" class="btn btn-primary" disabled>I've Saved My Phrase</button>
  </div>

  <!-- Main Wallet Screen -->
  <div id="mainScreen" class="screen">
    <div class="header">
      <div>
        <div>
          <div>
            <img src="/icons/logo.png" style="width: 25px; height: 25px;">
          </div>
        </div>
        <div>
          <div class="wallet-name">
            <select id="accountSelector" class="account-selector">
              <option value="0">Account 1</option>
            </select>
          </div>
          <div class="network">Mainnet</div>
        </div>
      </div>
      <div style="display: flex; gap: 8px;">
        <button class="icon-btn" id="addAccountBtn" title="Add Account">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
          </svg>
        </button>
        <button class="icon-btn" id="settingsBtn" title="Switch Network">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
            <path stroke-linecap="round" stroke-linejoin="round" d="M8.288 15.038a5.25 5.25 0 0 1 7.424 0M5.106 11.856c3.807-3.808 9.98-3.808 13.788 0M1.924 8.674c5.565-5.565 14.587-5.565 20.152 0M12.53 18.22l-.53.53-.53-.53a.75.75 0 0 1 1.06 0Z" />
          </svg>
        </button>
      </div>
    </div>

    <div class="address-bar">
      <span id="walletAddress">7xKX...gAsU</span>
      <button class="icon-btn" id="copyAddressBtn">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
          <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
        </svg>
      </button>
    </div>

    <div class="balance-section">
      <div class="balance-label">Total Balance</div>
      <div class="balance-amount" id="balanceAmount">0.00</div>
      <div class="balance-currency">SOL</div>
      <div class="balance-usd" id="balanceUsd">≈ $0.00 USD</div>
    </div>

    <div class="action-buttons">
      <button class="action-btn" id="sendBtn">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="22" y1="2" x2="11" y2="13"></line>
          <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
        </svg>
        <span>Send</span>
      </button>
      <button class="action-btn" id="receiveBtn">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polyline points="8 17 12 21 16 17"></polyline>
          <line x1="12" y1="12" x2="12" y2="21"></line>
          <path d="M20.88 18.09A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.29"></path>
        </svg>
        <span>Receive</span>
      </button>
      <button class="action-btn" id="swapBtn">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polyline points="23 4 23 10 17 10"></polyline>
          <polyline points="1 20 1 14 7 14"></polyline>
          <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>
        </svg>
        <span>Swap</span>
      </button>
    </div>

    <div class="activity-section">
      <h3>Recent Activity</h3>
      <div id="activityList" class="activity-list">
        <div style="text-align: center; padding: 20px; color: var(--text-tertiary);">
          <p>Loading transactions...</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Approval Screen -->
  <div id="approvalScreen" class="screen">
    <div class="approval-container">
      <div class="approval-header">
        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="var(--warning)" stroke-width="2">
          <circle cx="12" cy="12" r="10"></circle>
          <line x1="12" y1="8" x2="12" y2="12"></line>
          <line x1="12" y1="16" x2="12.01" y2="16"></line>
        </svg>
        <h2 id="approvalType">Approve Transaction</h2>
      </div>
      
      <div class="approval-details" id="approvalDetails">
        <!-- Details will be inserted here -->
      </div>

      <div class="approval-warning">
        ⚠️ Only approve if you trust this transaction
      </div>

      <div class="approval-buttons">
        <button class="btn btn-secondary" id="rejectBtn">Reject</button>
        <button class="btn btn-primary" id="approveBtn">Approve</button>
      </div>
    </div>
  </div>

  <!-- Send Screen -->
  <div id="sendScreen" class="screen">
    <div class="screen-header">
      <button class="icon-btn" id="backFromSend">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="19" y1="12" x2="5" y2="12"></line>
          <polyline points="12 19 5 12 12 5"></polyline>
        </svg>
      </button>
      <h2>Send SOL</h2>
    </div>
    <form id="sendForm">
      <div class="input-group">
        <label>Recipient Address</label>
        <input type="text" id="recipientAddress" placeholder="Enter Solana address" required>
      </div>
      <div class="input-group">
        <label>Amount</label>
        <div class="amount-input">
          <input type="number" id="sendAmount" placeholder="0.00" step="0.01" required>
          <span class="currency">SOL</span>
        </div>
        <div class="available">Available: <span id="availableBalance">0.00</span> SOL</div>
      </div>
      <div class="fee-box">
        <div class="fee-row">
          <span>Network Fee</span>
          <span>~0.000005 SOL</span>
        </div>
        <div class="fee-row total">
          <span>Total</span>
          <span id="totalAmount">0.000005 SOL</span>
        </div>
      </div>
      <button type="submit" class="btn btn-primary">Review Transaction</button>
    </form>
  </div>

  <!-- Receive Screen -->
  <div id="receiveScreen" class="screen">
    <div class="screen-header">
      <button class="icon-btn" id="backFromReceive">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="19" y1="12" x2="5" y2="12"></line>
          <polyline points="12 19 5 12 12 5"></polyline>
        </svg>
      </button>
      <h2>Receive SOL</h2>
    </div>
    <div class="receive-content">
      <div class="qr-code">
        <div class="qr-placeholder">QR Code</div>
      </div>
      <p class="receive-label">Your Wallet Address</p>
      <div class="receive-address" id="receiveAddress">7xKXtg2CW87d97TXJSDpbD5jBkheTqA83TZRuJosgAsU</div>
      <button class="btn btn-primary" id="copyReceiveAddressBtn">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
          <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
        </svg>
        Copy Address
      </button>
    </div>
  </div>

  <!-- Swap Screen -->
  <div id="swapScreen" class="screen">
    <div class="screen-header">
      <button class="icon-btn" id="backFromSwap">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="19" y1="12" x2="5" y2="12"></line>
          <polyline points="12 19 5 12 12 5"></polyline>
        </svg>
      </button>
      <h2>Swap Tokens</h2>
    </div>
    <form id="swapForm">
      <div class="swap-info-box">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10"></circle>
          <line x1="12" y1="16" x2="12" y2="12"></line>
          <line x1="12" y1="8" x2="12.01" y2="8"></line>
        </svg>
        <span>Powered by Jupiter Aggregator • Mainnet Only</span>
      </div>
      
      <div class="input-group">
        <label>You Pay</label>
        <div class="amount-input">
          <input type="number" id="swapInAmount" placeholder="0.00" step="0.01" required>
          <span class="currency">SOL</span>
        </div>
      </div>

      <div class="swap-arrow">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="12" y1="5" x2="12" y2="19"></line>
          <polyline points="19 12 12 19 5 12"></polyline>
        </svg>
      </div>

      <div class="input-group">
        <label>You Receive (estimated)</label>
        <div class="amount-input">
          <input type="number" id="swapOutAmount" placeholder="0.00" step="0.01" readonly>
          <span class="currency">USDC</span>
        </div>
      </div>

      <div class="fee-box">
        <div class="fee-row">
          <span>Exchange Rate</span>
          <span id="swapRate">Fetching...</span>
        </div>
        <div class="fee-row">
          <span>Slippage Tolerance</span>
          <span>0.5%</span>
        </div>
      </div>

      <button type="submit" class="btn btn-primary">Execute Swap</button>
    </form>
  </div>

  <script src="popup.js"></script>
</body>
</html>